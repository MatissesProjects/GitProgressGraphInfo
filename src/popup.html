<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <style>
    body {
      width: 250px;
      padding: 15px;
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, Arial, sans-serif;
      margin: 0;
      background-color: #ffffff;
      color: #24292f;
    }
    h1 {
      font-size: 18px;
      margin: 0 0 15px 0;
      border-bottom: 1px solid #d0d7de;
      padding-bottom: 8px;
    }
    .stat-row {
      display: flex;
      justify-content: space-between;
      margin-bottom: 10px;
      font-size: 14px;
    }
    .level-list {
      margin-top: 15px;
      padding-top: 10px;
      border-top: 1px solid #d0d7de;
    }
    .level-item {
      display: flex;
      align-items: center;
      gap: 10px;
      margin-bottom: 6px;
    }
    .square {
      width: 12px;
      height: 12px;
      border-radius: 2px;
      border: 1px solid rgba(27, 31, 35, 0.06);
    }
    .l1 { background-color: #9be9a8; }
    .l2 { background-color: #40c463; }
    .l3 { background-color: #30a14e; }
    .l4 { background-color: #216e39; }
    
    .rarity-list {
      margin-top: 15px;
      padding-top: 10px;
      border-top: 1px dotted #d0d7de;
    }
    .rarity-row {
      display: flex;
      align-items: center;
      margin-bottom: 4px;
      font-size: 11px;
    }
    .rarity-bar {
      height: 4px;
      background: #f6f8fa;
      flex-grow: 1;
      margin: 0 8px;
      border-radius: 2px;
      overflow: hidden;
      border: 1px solid #d0d7de;
    }
    .rarity-fill {
      height: 100%;
      background: #30a14e;
    }
    .rarity-label { width: 50px; text-align: right; }
    .rarity-value { width: 40px; font-weight: bold; }
    
    .error {
      color: #cf222e;
      font-size: 12px;
      display: none;
    }
    #content { display: none; }
    #loading { font-style: italic; color: #57606a; }
  </style>
</head>
<body>
  <h1>GitHeat Stats</h1>
  
  <div id="loading">Detecting GitHub profile...</div>
  <div id="error" class="error">Not on a GitHub profile or graph not loaded.</div>

  <div id="content">
    <div class="stat-row">
      <label for="theme-select" style="font-size: 12px; font-weight: 600;">THEME</label>
      <select id="theme-select" style="font-size: 12px; border-radius: 4px; border: 1px solid #d0d7de; padding: 2px 4px;">
        <option value="green">Classic Green</option>
        <option value="flame">Flame Heat</option>
      </select>
    </div>

    <div class="stat-row" style="margin-top: 10px;">
      <span>Total Contributions:</span>
      <strong id="total-count">-</strong>
    </div>

    <div class="level-list">
      <div class="level-item">
        <div class="square l1"></div>
        <span>Level 1:</span>
        <strong id="l1-range">-</strong>
      </div>
      <div class="level-item">
        <div class="square l2"></div>
        <span>Level 2:</span>
        <strong id="l2-range">-</strong>
      </div>
      <div class="level-item">
        <div class="square l3"></div>
        <span>Level 3:</span>
        <strong id="l3-range">-</strong>
      </div>
      <div class="level-item">
        <div class="square l4"></div>
        <span>Level 4:</span>
        <strong id="l4-range">-</strong>
      </div>
    </div>

    <div class="rarity-list" id="rarity-section">
      <div style="font-size: 12px; color: #57606a; margin-bottom: 8px; font-weight: 600;">ACTIVITY RARITY</div>
      <!-- Percentiles will be injected here -->
    </div>
  </div>

  <script src="popup.js"></script>
</body>
</html>
